Notas personales con Git
Hoy 2/3 quise incorporar las novedades del repositorio original de Jammie. 
Era la primera vez que lo intentaba con git.

1.- decirle a mi copia cual es el proyecto superior:
git remote add upstream https://github.com/jamierumbelow/codeigniter-base-model.git

2.- luego decirle que baje los cambios
git fetch upstream
remote: Counting objects: 26, done.
remote: Compressing objects: 100% (11/11), done.
remote: Total 21 (delta 10), reused 17 (delta 6)
Unpacking objects: 100% (21/21), done.
From https://github.com/jamierumbelow/codeigniter-base-model
 * [new branch]      master     -> upstream/master

3.- integrar los cambios de la rama upstream con la nuestra (master)
git merge upstream/master
Auto-merging core/MY_Model.php
CONFLICT (content): Merge conflict in core/MY_Model.php
Automatic merge failed; fix conflicts and then commit the result.

4.- Acá marca problemas: git no ha sido capaz de mezclar el código que viene de una rama con 
la nuestra. Le pediremos que nos muestre los conflictos:

git diff
diff --cc core/MY_Model.php
index 2176da9,fcf1aa1..0000000
--- a/core/MY_Model.php
+++ b/core/MY_Model.php
@@@ -569,12 -575,7 +575,16 @@@ class MY_Model extends CI_Mode
          $where = func_get_args();
          $this->_set_where($where);
  
++<<<<<<< HEAD
 +        if ($this->soft_delete && $this->_temporary_with_deleted !== TRUE)
 +        {
 +            $this->db->where($this->soft_delete_key, FALSE);
 +        }
 +
 +        return $this->db->count_all_results($this->_table);
++=======
+         return $this->_database->count_all_results($this->_table);
++>>>>>>> upstream/master
      }
  
      /**
@@@ -582,18 -583,10 +592,22 @@@
       */
      public function count_all()
      {
++<<<<<<< HEAD
 +        if ($this->soft_delete && $this->_temporary_with_deleted !== TRUE)
 +        {
 +            $this->db->where($this->soft_delete_key, FALSE);
 +              return $this->db->count_all_results($this->_table);
 +        }
 +        else
 +       {
 +                      return $this->db->count_all($this->_table);
 +        }     
++=======
+         return $this->_database->count_all($this->_table);
++>>>>>>> upstream/master
      }
 -
 -    /**
 +        
 +     /**
       * Tell the class to skip the insert validation
       */
      public function skip_validation()

el problema está en que cambie unos métodos, en particular unas líneas que usaban this->db, que 
en la nueva versión se ha cambiado a this->_database, para usar diferentes db en cada modelo

5.- cuando cargamos el archivo con conflictos en el editor, git nos ha insertado las marcas 
anteriores, así tenemos las dos versiones del código para resolver por nosotros mismos 
el conflicto. Editamos el código integrando los cambios manualmente.


6.- Confirmamos los cambios como siempre:

 git commit -a
[master 540d138] Merge remote-tracking branch 'upstream/master'
carlosmora:codeigniter-base-model carlos$ git status# On branch master
# Your branch is ahead of 'origin/master' by 7 commits.
#   (use "git push" to publish your local commits)
#

7.- Subir la version actualizada al repositorio.

git push
warning: push.default is unset; its implicit value is changing in
Git 2.0 from 'matching' to 'simple'. To squelch this message
and maintain the current behavior after the default changes, use:

  git config --global push.default matching

To squelch this message and adopt the new behavior now, use:

  git config --global push.default simple

See 'git help config' and search for 'push.default' for further information.
(the 'simple' mode was introduced in Git 1.7.11. Use the similar mode
'current' instead of 'simple' if you sometimes use older versions of Git)

fatal: remote error: 
  You can't push to git://github.com/carlos-mora/codeigniter-base-model.git
  Use git@github.com:carlos-mora/codeigniter-base-model.git

¡No hizo nada! Por el mensaje, parece ser que la version nueva de git requiere de cierta
configuración.

8.- 
git config --global push.default simple
git push
fatal: remote error: 
  You can't push to git://github.com/carlos-mora/codeigniter-base-model.git
  Use git@github.com:carlos-mora/codeigniter-base-model.git

mierda! esto se esta poniendo pesado. Pruebo con el viejo estilo: 

git config --global push.default matching
git push
fatal: remote error: 
  You can't push to git://github.com/carlos-mora/codeigniter-base-model.git
  Use git@github.com:carlos-mora/codeigniter-base-model.git

Lo mismo. Probamos poniendo el nombre:

git push git@github.com:carlos-mora/codeigniter-base-model.git
The authenticity of host 'github.com (207.97.227.239)' can't be established.
RSA key fingerprint is 16:27:ac:a5:76:28:2d:36:63:1b:56:4d:eb:df:a6:48.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added 'github.com,207.97.227.239' (RSA) to the list of known hosts.
Permission denied (publickey).
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists.

Parece que le jode porque active las claves ssh en bitbucket, y git las usa para github.

9.- entro en mi cuenta de github y las añado. Intento de nuevo:

git push git@github.com:carlos-mora/codeigniter-base-model.git
Counting objects: 33, done.
Delta compression using up to 8 threads.
Compressing objects: 100% (20/20), done.
Writing objects: 100% (25/25), 3.46 KiB, done.
Total 25 (delta 12), reused 0 (delta 0)
To git@github.com:carlos-mora/codeigniter-base-model.git
   1e4409c..540d138  master -> master

éxito! Por fin!

